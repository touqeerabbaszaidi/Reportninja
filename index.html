<!DOCTYPE HTML>
<html>
<head>
    <title></title>
    <script type="text/javascript" src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <link href="Styles/style.css" rel="stylesheet" type="text/css" media="all" />
    <!--<script type="text/javascript" src="js/jquery-1.4.2.js"></script>-->
    <script src="JS/jquery-1.8.3.js" type="text/javascript"></script>
    <script type="text/javascript" src="js/jquery.Storage.js"></script>
    <script type="text/javascript" src="js/jquery.jsonp-2.1.3.min.js"></script>
        
    <script type="text/javascript">
        $(document).ready(function () {
            $("#submit").click(function () {
                signIn();
                //alert("button clicked.");
                //                UserLogin();
                //                LoginBusinessAdmin();
                //                LoginBackOfficeUser();
            });
            //var online = navigator.onLine;    // Detecting the internet connection
            ////alert(online);
            //if (online) {
            //    // do your stuff
            //} else {
            //    alert('You\'re Offline now...');
            //    return false;
            //}

        });

        var flag1 = "false";
        var flag2 = "false";
        var flag3 = "false";
        var flag4 = "false";

        function signIn() {
            //alert("Pressed");
            $.ajax({

                type: "POST",
                url: "http://www.mobile.reportninja.org/webservice.asmx/btnLogIn_Click",
               // url: "WebService.asmx/btnLogIn_Click",
                //url: "http://rnws1.2bvision.com/WebService.asmx/btnLogIn_Click",
                //url: "http://www.reportninja.org/WebServices/WebService.asmx/btnLogIn_Click",
                data: "{'email': '" + $('#txtEmail').val() + "','password':'" + $('#txtPassword').val() + "'}",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (response) {
                   // alert("Success");
                    if (response != null && response != "") {
                       // alert("ifpart");
                        var prods = response.d;
                       // alert(prods);
                        if (prods == "false") {
                            alert("Wrong username and password");
                        }
                        else
                        {
                           // alert("Else Part");
                            var splitString = prods.split(",");
                           // var Email= document.getElementById("txtEmail")
                            window.location = "test2.html?id=" + splitString[0] + "&username=" + splitString[1] + "&Email=" + document.getElementById("txtEmail").value;
                           // alert("wl");
                           //window.location.replace("http://rnws1.2bvision.com/test2.html?id=" + splitString[0] + "&username=" + splitString[1]);
                        }
                        
                        //alert(prods);
                        //                        $.ajax({
                        //                            type: "POST",
                        //                            //url: "http://projectx.2bvision.com/WebCommunicator/Webservice.asmx/GetSchoolUserByEmailAndPassword",
                        //                            url: "WebService.asmx/LoadReports",
                        //                            data: "{'id': '" + prods + "'}",
                        //                            contentType: "application/json; charset=utf-8",
                        //                            dataType: "json",
                        //                            success: function (response) {
                        //                                alert("in load reports");
                        //                                if (response != null && response != "") {
                        //                                    var prods = response.d;
                        //                                    var myarray = prods.split(',');
                        //                                    $.Storage.set("myarray", myarray[0]);
                        //                                    alert($.Storage.get("myarray"));
                        //                                    $.Storage.set("name", "value");
                        //                                    alert($.Storage.get("name"));
                        //                                    window.location = "home.htm";
                        //                                    //alert(myarray[0]);
                        //                                    //sessionStorage.setitem("myarray", "myarray");
                        //                                    //window.location = "home.htm";
                        //                                    //alert(sessionStorage.getitem("myarray"));
                        //                                    //alert(myarray[0]);
                        //                                    //alert(myarray[1]);                                                                     
                        //                                }
                        //                                else {
                        //                                    alert("No data to display");
                        //                                    alert(response.d);
                        //                                }
                        //                            },
                        //                            error: function (e) {
                        //                                $("#Something").html("There was an error retrieving records." + "Error Description:  " + e.d);
                        //                            }

                        //                        });


                    }
                    else {
                        alert("No data to display");
                        //alert(response.d);
                    }
                },
                error: function (e) {
                    $("#Something").html("There was an error retrieving records." + "Error Description:  " + e.d);
                }
            });
        }

        //function getReports() {
        //    alert("Pressed");
        //    $.ajax({
        //        type: "POST",
        //        //url: "http://projectx.2bvision.com/WebCommunicator/Webservice.asmx/GetSchoolUserByEmailAndPassword",
        //        //url: "http://www.reportninja.org/WebServices/WebService.asmx/LoadReports",
        //        url: "WebService.asmx/LoadReports",
        //        data: "{'email': '" + $('#txtEmail').val() + "','password':'" + $('#txtPassword').val() + "'}",
        //        contentType: "application/json; charset=utf-8",
        //        dataType: "json",
        //        success: function (response) {
        //            if (response != null && response != "") {
        //                var prods = response.d;
        //                /*if (prods=="true")
        //                {
        //                //alert("yes");
        //                window.location="Home.htm";
        //                }*/
        //                //alert(prods);
        //                //return prods.SchoolName;
        //            }
        //            else {
        //                alert("No data to display");
        //                alert(response.d);
        //            }
        //        },
        //        error: function (e) {
        //            $("#Something").html("There was an error retrieving records." + "Error Description:  " + e.d);
        //        }

        //    });


        //}

        //function UserLogin() {
        //    alert("pressed");
        //    $.ajax({
        //        type: "POST",
        //        //url: "http://projectxmobile.2bvision.com/webservice.asmx/MobileAppGetSchoolUserByEmailAndPassword",
        //        //url: "http://www.reportninja.org/WebServices/WebService.asmx/MobileAppGetSchoolUserByEmailAndPassword",
        //        url: "Webservice.asmx/MobileAppGetSchoolUserByEmailAndPassword",
        //        data: "{'email': '" + $('#txtEmail').val() + "','password':'" + $('#txtPassword').val() + "'}",
        //        contentType: "application/json; charset=utf-8",
        //        dataType: "json",
        //        success: function (response) {
        //            if (response.d != null && response.d != "") {
        //                var prods = response.d;
        //                $("#Something").show();
        //                $("#wraper").hide();
        //                $.each(prods, function (index, prod) {
        //                    var schooluserid = prod.SchoolUserId;
        //                    var username = prod.FirstName + " " + prod.LastName;
        //                    $.ajax({
        //                        type: "POST",
        //                        //url: "http://projectxmobile.2bvision.com/Webservice.asmx/GetSchools_SchoolCodeWise",
        //                        //url: "http://www.reportninja.org/WebServices/WebService.asmx/GetSchools_SchoolCodeWise",
        //                        url: "Webservice.asmx/GetSchools_SchoolCodeWise",
        //                        data: "{'strSchoolCode': '" + prod.SchoolCode + "'}",
        //                        contentType: "application/json; charset=utf-8",
        //                        dataType: "json",
        //                        success: function (response) {
        //                            if (response != null && response != "") {
        //                                alert(response);
        //                                var prods = response.d;
        //                                $("#Something").append("<a href='ataglance.html?value=" + prods.SchoolId + "&userId=" + schooluserid + "&username=" + username + "' style='font-size:18px;color:#ffffff;magin:25px 0px 0px 0px;'>" + prods.SchoolName + "</a>" + "<br/>");
        //                                return prods.SchoolName;
        //                            }
        //                            else {
        //                                alert("No data to display");
        //                                alert(response.d);
        //                            }
        //                        },
        //                        error: function (e) {
        //                            if (flag3 == "false") {
        //                                flag3 = "true";
        //                            }
        //                        }
        //                    });
        //                });
        //            }
        //            else {
        //                if (flag1 == "false") {
        //                    flag1 = "true";
        //                }
        //            }
        //        },
        //        error: function (e) {
        //            if (flag3 == "false") {
        //                flag3 = "true";
        //            }
        //        }
        //    });

        //    return false;
        //}

        //function LoginBusinessAdmin() {
        //    $.ajax({
        //        type: "POST",
        //        //url: "http://projectxmobile.2bvision.com/webservice.asmx/MobileAppGetSchoolByEmailPassword",
        //        //url: "http://www.reportninja.org/WebServices/WebService.asmx/MobileAppGetSchoolByEmailPassword",
        //        url: "Webservice.asmx/MobileAppGetSchoolByEmailPassword",
        //        data: "{'email': '" + $('#txtEmail').val() + "','password':'" + $('#txtPassword').val() + "'}",
        //        contentType: "application/json; charset=utf-8",
        //        dataType: "json",
        //        success: function (response) {
        //            if (response.d != null && response.d != "") {
        //                var prods = response.d;
        //                $("#Something").show();
        //                $("#wraper").hide();
        //                $.each(prods, function (index, prod) {
        //                    var schooluserid = prod.SchoolUserId;
        //                    //var username = prod.FirstName + " " + prod.LastName;
        //                    var username = "Admin";
        //                    $.ajax({
        //                        type: "POST",
        //                        //url: "http://projectxmobile.2bvision.com/Webservice.asmx/GetSchools_SchoolCodeWise",
        //                        //url: "http://www.reportninja.org/WebServices/WebService.asmx/GetSchools_SchoolCodeWise",
        //                        url: "Webservice.asmx/GetSchools_SchoolCodeWise",
        //                        data: "{'strSchoolCode': '" + prod.SchoolCode + "'}",
        //                        contentType: "application/json; charset=utf-8",
        //                        dataType: "json",
        //                        success: function (response) {
        //                            if (response != null && response != "") {
        //                                var prods = response.d;
        //                                $("#Something").append("<a href='ataglance.html?value=" + prods.SchoolId + "&userId=" + schooluserid + "&username=" + username + "' style='font-size:18px;color:#ffffff;magin:25px 0px 0px 0px;'>" + prods.SchoolName + "</a>" + "<br/>");
        //                                return prods.SchoolName;
        //                            }
        //                            else {
        //                                alert("No data to display");
        //                                alert(response.d);
        //                            }
        //                        },
        //                        error: function (e) {
        //                            if (flag4 == "false") {
        //                                flag4 = "true";
        //                            }
        //                        }
        //                    });
        //                });
        //            }
        //            else {
        //                if (flag2 == "false") {
        //                    flag2 = "true";
        //                }
        //            }
        //        },
        //        error: function (e) {
        //            if (flag4 == "false") {
        //                flag4 = "true";
        //            }
        //        }
        //    });

        //    return false;
        //}

        //function LoginBackOfficeUser() {
        //    $.ajax({
        //        type: "POST",
        //        //url: "http://projectxmobile.2bvision.com/webservice.asmx/MobileAppGetBackOfficeUser_ByEmailandPassword",
        //        //url: "http://www.reportninja.org/WebServices/WebService.asmx/MobileAppGetBackOfficeUser_ByEmailandPassword",
        //        url: "Webservice.asmx/MobileAppGetBackOfficeUser_ByEmailandPassword",
        //        data: "{'email': '" + $('#txtEmail').val() + "','password':'" + $('#txtPassword').val() + "'}",
        //        contentType: "application/json; charset=utf-8",
        //        dataType: "json",
        //        success: function (response) {
        //            if (response.d != null && response.d != "") {
        //                var prods = response.d;
        //                $("#Something").show();
        //                $("#wraper").hide();
        //                $.each(prods, function (index, prod) {
        //                    var schooluserid = prod.SchoolUserId;
        //                    //var username = prod.FirstName + " " + prod.LastName;
        //                    var username = "Back User";
        //                    //alert("School Code::::" + prod.SchoolId);
        //                    $.ajax({
        //                        type: "POST",
        //                        //url: "http://projectxmobile.2bvision.com/Webservice.asmx/GetSchool_SchoolIdWise",
        //                        //url: "http://www.reportninja.org/WebServices/WebService.asmx/GetSchool_SchoolIdWise",
        //                        url: "Webservice.asmx/GetSchool_SchoolIdWise",
        //                        data: "{'SchoolId': '" + prod.SchoolId + "'}",
        //                        contentType: "application/json; charset=utf-8",
        //                        dataType: "json",
        //                        success: function (response) {
        //                            if (response != null && response != "") {
        //                                var prods = response.d;
        //                                $("#Something").append("<a href='ataglance.html?value=" + prods.SchoolId + "&userId=" + schooluserid + "&username=" + username + "' style='font-size:18px;color:#ffffff;magin:25px 0px 0px 0px;'>" + prods.SchoolName + "</a>" + "<br/>");
        //                                return prods.SchoolName;
        //                            }
        //                            else {
        //                                alert("No data to display");
        //                                alert(response.d);
        //                            }
        //                        },
        //                        error: function (e) {
        //                            if (flag3 == "true" && flag4 == "true") {
        //                                $("#Something").html("There was an error retrieving records." + "Error Description:  " + e.d);
        //                            }
        //                        }
        //                    });
        //                });
        //            }
        //            else {
        //                if (flag1 == "true" && flag2 == "true") {
        //                    alert("Wrong Username or Password.");
        //                }
        //            }
        //        },
        //        error: function (e) {
        //            if (flag3 == "true" && flag4 == "true") {
        //                $("#Something").html("There was an error retrieving records." + "Error Description:  " + e.d);
        //            }
        //        }
        //    });

        //    return false;
        //}

        //function GetSchoolNameBySchoolCode(code) {
        //    $.ajax({
        //        type: "POST",
        //        //url: "http://projectx.2bvision.com/WebCommunicator/Webservice.asmx/GetSchoolUserByEmailAndPassword",
        //        //url: "http://www.reportninja.org/WebServices/WebService.asmx/GetSchools_SchoolCodeWise",
        //        url: "Webservice.asmx/GetSchools_SchoolCodeWise",
        //        data: "{'strSchoolCode': '" + code + "'}",
        //        contentType: "application/json; charset=utf-8",
        //        dataType: "json",
        //        success: function (response) {
        //            if (response != null && response != "") {
        //                var prods = response.d;
        //                //alert(prods.SchoolName);
        //                return prods.SchoolName;
        //            }
        //            else {
        //                alert("No data to display");
        //                alert(response.d);
        //            }
        //        },
        //        error: function (e) {
        //            $("#Something").html("There was an error retrieving records." + "Error Description:  " + e.d);
        //        }
        //    });


        //}

        //function AuthenticateSoapHeader() {
        //    $.ajax({
        //        type: "POST",
        //        //url: "http://www.reportninja.org/WebServices/WebService.asmx/AuthenticateSoapHeader",
        //        url: "Webservice.asmx/AuthenticateSoapHeader",
        //        //data: "{'email': '" + $('#txtEmail').val() + "','password':'" + $('#txtPassword').val() + "'}",
        //        contentType: "application/json; charset=utf-8",
        //        dataType: "json",
        //        success: function (response) {
        //            if (response != null && response != "") {
        //                alert(response.d);
        //            }
        //            else {
        //                alert("No data to display");
        //                alert(response.d);
        //            }
        //        },
        //        error: function (e) {
        //            $("#Something").html("There was an error retrieving records." + "Error Description:  " + e.d);
        //        }
        //    });
        //}

        //function Encrypt(password) {
        //    $.ajax({
        //        type: "POST",
        //        //url: "http://www.reportninja.org/WebServices/WebService.asmx/Encrypt",
        //        url: "Webservice.asmx/Encrypt",
        //        data: "{'text':'" + password + "'}",
        //        contentType: "application/json; charset=utf-8",
        //        dataType: "json",
        //        success: function (response) {
        //            if (response != null && response != "") {
        //                alert(response.d);
        //                //                        var prods = response.d;
        //                //                        $.each(prods, function (index, prod) {
        //                //                            $("#Something").append("<strong>" + prod.SchoolCode + "</strong>" + "<br/>");
        //                //                        });
        //            }
        //            else {
        //                alert("No data to display");
        //                alert(response.d);
        //            }
        //        },
        //        //                success: function (list) {
        //        //                    $("#Something").append("<ul id='bullets'></ul>");
        //        //                    for (i = 0; i < 5; i++) {
        //        //                        $("#bullets").append("<li>" + i + "</li>");
        //        //                    }
        //        //                },
        //        error: function (e) {
        //            $("#Something").html("There was an error retrieving records." + "Error Description:  " + e.d);
        //        }
        //    });


        //}


        
    </script>
    <script type="text/javascript">
        function asd() {
            var thing = { plugin: 'jquery-json', version: 2.3 };

            var encoded = $.toJSON(thing);
            // '{"plugin":"jquery-json","version":2.3}'
            var name = $.evalJSON(encoded).plugin;
            // "jquery-json"
            var version = $.evalJSON(encoded).version;
            // 2.3
            sessionStorage.setitem("name", "value");
            // alert(sessionStorage.getitem("name"));
        }
    </script>
    <script type="text/javascript">
        function ShowResult() {
            alert(event.result.value);
        }
    </script>
</head>
<body style="padding: 0px; margin: 0px">
    
    <div class="container" id="wraper">
        <!-- container starts-->
        <div  style="width: 90%; margin-left: 5%; position: absolute; bottom:6%">
            <!-- login -->
            <div style="width: 100%; height: auto; margin: 0px auto; position: relative;">
                
                <div style="float: left; width: 100%; height: auto">
                
                    <!--<div class="input-text">k
                        User Name:</div>-->
                    <input id="txtEmail" class="input-area" type="text" placeholder="User name"
                        tabindex="1" size="50" maxlength="60" name="txtEmail" />
                    <!--<div class="input-text">
                        Password:</div>-->
                    <input id="txtPassword" class="input-area" type="password" placeholder="Password"
                        tabindex="1" size="20" maxlength="15" name="txtPassword" />
                        <!--<center><a href="signup.htm">Click here for sign up</a></center>-->
                </div>
                <center>
                    <input id="submit" class="submit-btn" type="submit" tabindex="3"
                        name="submit" value="Login" style="color: #FFF; font-size: 24px; font-weight: bold;
                        font-family: Arial; text-align: center;" /></center>
            </div>
        </div>
        <!-- container ends-->
    </div>
    
</body>
</html>